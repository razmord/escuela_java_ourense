<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        .div-marco{
            border:blue solid;
            background-color: lightgray;
        }
        .fondo-body{
            background-color: lightgreen;
        }
    </style>
</head>
<body>
    <input id="btn_xrd" type="button"/>
    <div id="componente_eventos"><label>Evento con listener</label>
    <input id="input_listo"/>
    <input id="btn_listo" type="button"/>
    <br/>
    <div id="info_evento_listo"></div>
    </div>
    <br/>
    <label>Evento con listener</label>
    <input id="input_otro"/>
    <input id="btn_otro" type="button"/>
    <br/>
    <div id="info_evento_otro"></div>
    <script>
        let input_listo = document.getElementById("input_listo");
        let btn_listo = document.getElementById("btn_listo");
        let btn_xrd = document.getElementById("btn_xrd");
        let divE=document.getElementById("info_evento_otro");
        btn_listo.value ="Pulsa, listillo";
        btn_listo.addEventListener("click",funCallbkAlApulsar);
        btn_listo.addEventListener("click",funCallbkAlApulsar_Dos);
        let input_otro = document.getElementById("input_otro");
        let btn_otro = document.getElementById("btn_otro");
        btn_otro.value ="Pulsa este, listillo";
        btn_otro.addEventListener("click",funCallbkAlApulsar);
        btn_otro.addEventListener ("click",funCallbkAlApulsar_Dos);
        gestorEventos(input_listo,btn_xrd,divE);
        function funCallbkAlApulsar(evento ){
            let partePropiaId = evento.currentTarget.id.substr(4);
            let input = document.getElementById("input_"+partePropiaId);
            let info_evento = document.getElementById("info_evento_"+partePropiaId);
            input.value = "Typo evento: "+evento.type;
            evento.currentTarget.value = "Puedes repetir";
            info_evento.innerHTML+= "evento.currentTarget.id =" + evento.currentTarget.id;
            info_evento.className = "div-marco";
        }
        function funCallbkAlApulsarGestionada(evento ){
            let classBt = evento.currentTarget.id+"-target";
            let input = document.getElementsByClassName(classBt+"-input")[0];
            let info_evento = document.getElementsByClassName(classBt+"-div")[0];
            input.value = "Vaya fiesta: "+evento.type;
            evento.currentTarget.value = "FIESTAAAAAA";
            info_evento.innerHTML+= "evento.currentTarget.id =" + evento.currentTarget.id;
            info_evento.className = "div-marco";
        }
        function funCallbkAlApulsar_Dos(evento){
            document.getElementsByTagName("body")[0].className = "fondo-body";
        }
        function gestorEventos(input,boton,div){
            if(boton.id==undefined){
                boton.id="boton-id-"+Math.random().toString(36).substring(2, 15);
            }
            input.className += " "+boton.id+"-target-input";
            div.className += " "+boton.id+"-target-div";
            boton.addEventListener("click",funCallbkAlApulsarGestionada);
        }


    </script>
</body>
</html>